<?xml version="1.0" encoding="UTF-8"?>
<bpmn:definitions xmlns:bpmn="http://www.omg.org/spec/BPMN/20100524/MODEL" xmlns:bpmndi="http://www.omg.org/spec/BPMN/20100524/DI" xmlns:dc="http://www.omg.org/spec/DD/20100524/DC" xmlns:di="http://www.omg.org/spec/DD/20100524/DI" xmlns:camunda="http://camunda.org/schema/1.0/bpmn" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns:modeler="http://camunda.org/schema/modeler/1.0" id="Definitions_1oubpmc" targetNamespace="http://bpmn.io/schema/bpmn" exporter="Camunda Modeler" exporterVersion="5.31.0" modeler:executionPlatform="Camunda Platform" modeler:executionPlatformVersion="7.22.0">
  <bpmn:process id="digital_forms_events" name="Digital Forms Events" isExecutable="true" camunda:historyTimeToLive="P30D">
    <bpmn:startEvent id="StartEvent_1" name="start">
      <bpmn:outgoing>Flow_11aa80b</bpmn:outgoing>
    </bpmn:startEvent>
    <bpmn:endEvent id="Event_0ts53jy" name="end">
      <bpmn:incoming>Flow_0np0ks7</bpmn:incoming>
    </bpmn:endEvent>
    <bpmn:serviceTask id="submit_collision" name="Submit Colliision" camunda:asyncAfter="true">
      <bpmn:extensionElements>
        <camunda:connector>
          <camunda:inputOutput>
            <camunda:inputParameter name="method">POST</camunda:inputParameter>
            <camunda:inputParameter name="url">
              <camunda:script scriptFormat="groovy">var system = java.lang.System;
system.getenv('REACT_APP_RSBC_API_URL')+"/api/v1/collision"</camunda:script>
            </camunda:inputParameter>
            <camunda:inputParameter name="payload">${collision}</camunda:inputParameter>
            <camunda:inputParameter name="headers">
              <camunda:map>
                <camunda:entry key="Authorization">Bearer ${token}</camunda:entry>
                <camunda:entry key="Content-Type">application/json</camunda:entry>
              </camunda:map>
            </camunda:inputParameter>
            <camunda:outputParameter name="statusCode">#{statusCode}</camunda:outputParameter>
          </camunda:inputOutput>
          <camunda:connectorId>http-connector</camunda:connectorId>
        </camunda:connector>
        <camunda:failedJobRetryTimeCycle>R0/PT1M</camunda:failedJobRetryTimeCycle>
      </bpmn:extensionElements>
      <bpmn:incoming>Flow_0dibfen</bpmn:incoming>
      <bpmn:outgoing>Flow_03v93rj</bpmn:outgoing>
    </bpmn:serviceTask>
    <bpmn:sequenceFlow id="Flow_11aa80b" name="start listeners" sourceRef="StartEvent_1" targetRef="Activity_1xpaggf">
      <bpmn:extensionElements>
        <camunda:executionListener event="take">
          <camunda:script scriptFormat="javascript">execution.setVariable('applicationStatus', 'New');</camunda:script>
        </camunda:executionListener>
        <camunda:executionListener class="org.camunda.bpm.extension.hooks.listeners.ApplicationStateListener" event="take" />
        <camunda:executionListener class="org.camunda.bpm.extension.hooks.listeners.FormBPMJsonDataPipelineListener" event="take" />
      </bpmn:extensionElements>
    </bpmn:sequenceFlow>
    <bpmn:scriptTask id="Activity_1pvahuo" name="Transform Input" scriptFormat="groovy">
      <bpmn:incoming>Flow_0es6pgh</bpmn:incoming>
      <bpmn:outgoing>Flow_0dibfen</bpmn:outgoing>
      <bpmn:script>import groovy.json.JsonSlurper
import groovy.json.JsonOutput

// Get JSON string from execution variable
var formData = S(execution.getVariable("formData"));

// Remove the `currentUserRole` field
formData.deleteProp("currentUserRole");

def applicationId = execution.getVariable("applicationId");

// Add or update a property in formData
formData.prop("ff_application_id", applicationId);
execution.setVariable("collision", formData.toString())</bpmn:script>
    </bpmn:scriptTask>
    <bpmn:serviceTask id="Activity_153941x" name="Get OAuth Token">
      <bpmn:extensionElements>
        <camunda:connector>
          <camunda:inputOutput>
            <camunda:inputParameter name="method">POST</camunda:inputParameter>
            <camunda:inputParameter name="url">
              <camunda:script scriptFormat="groovy">var system = java.lang.System;
system.getenv('KEYCLOAK_URL')+"/auth/realms/"+system.getenv('KEYCLOAK_URL_REALM')+"/protocol/openid-connect/token"</camunda:script>
            </camunda:inputParameter>
            <camunda:inputParameter name="payload">grant_type=client_credentials</camunda:inputParameter>
            <camunda:inputParameter name="headers">
              <camunda:map>
                <camunda:entry key="Authorization">${basicAuth64}</camunda:entry>
                <camunda:entry key="Content-Type">application/x-www-form-urlencoded</camunda:entry>
              </camunda:map>
            </camunda:inputParameter>
            <camunda:outputParameter name="statusCode">#{statusCode}</camunda:outputParameter>
            <camunda:outputParameter name="response">#{response}</camunda:outputParameter>
          </camunda:inputOutput>
          <camunda:connectorId>http-connector</camunda:connectorId>
        </camunda:connector>
        <camunda:executionListener event="end">
          <camunda:script scriptFormat="JavaScript">if (statusCode != 200){
  throw new Error("Error from OAuth token call, response Code: "+statusCode)
}else{
}</camunda:script>
        </camunda:executionListener>
        <camunda:inputOutput>
          <camunda:inputParameter name="basicAuth64">
            <camunda:script scriptFormat="groovy">import java.util.Base64

def clientId = System.getenv("KEYCLOAK_CLIENTID")
def clientSecret = System.getenv("KEYCLOAK_CLIENTSECRET")

def credentials = clientId + ":" + clientSecret
def encoded = Base64.encoder.encodeToString(credentials.bytes)

return "Basic " + encoded</camunda:script>
          </camunda:inputParameter>
          <camunda:outputParameter name="token">${S(response).prop("access_token").stringValue()}</camunda:outputParameter>
        </camunda:inputOutput>
      </bpmn:extensionElements>
      <bpmn:incoming>Flow_17fr8p5</bpmn:incoming>
      <bpmn:outgoing>Flow_0es6pgh</bpmn:outgoing>
    </bpmn:serviceTask>
    <bpmn:sequenceFlow id="Flow_0es6pgh" sourceRef="Activity_153941x" targetRef="Activity_1pvahuo" />
    <bpmn:sequenceFlow id="Flow_0np0ks7" sourceRef="Activity_0azpkne" targetRef="Event_0ts53jy" />
    <bpmn:task id="Activity_02bgk3e" name="Update Application Status - Failed">
      <bpmn:extensionElements>
        <camunda:executionListener event="start">
          <camunda:script scriptFormat="javascript">execution.setVariable('applicationStatus', "Failed");
execution.setVariable("collision","");</camunda:script>
        </camunda:executionListener>
        <camunda:executionListener class="org.camunda.bpm.extension.hooks.listeners.ApplicationStateListener" event="start" />
        <camunda:executionListener event="end">
          <camunda:script scriptFormat="javascript">execution.setVariable('retry', 0);
throw new Error("Error submitting form, response Code: "+statusCode);</camunda:script>
        </camunda:executionListener>
      </bpmn:extensionElements>
      <bpmn:incoming>Flow_1cs9gzs</bpmn:incoming>
      <bpmn:outgoing>Flow_1drchzm</bpmn:outgoing>
    </bpmn:task>
    <bpmn:task id="Activity_0azpkne" name="Update Application Status - Submitted">
      <bpmn:extensionElements>
        <camunda:executionListener event="start">
          <camunda:script scriptFormat="javascript">execution.setVariable('applicationStatus', "Submitted");</camunda:script>
        </camunda:executionListener>
        <camunda:executionListener class="org.camunda.bpm.extension.hooks.listeners.ApplicationStateListener" event="start" />
      </bpmn:extensionElements>
      <bpmn:incoming>Flow_04z5ai6</bpmn:incoming>
      <bpmn:outgoing>Flow_0np0ks7</bpmn:outgoing>
    </bpmn:task>
    <bpmn:sequenceFlow id="Flow_0dibfen" sourceRef="Activity_1pvahuo" targetRef="submit_collision" />
    <bpmn:endEvent id="Event_1egd12n" name="end">
      <bpmn:incoming>Flow_1drchzm</bpmn:incoming>
    </bpmn:endEvent>
    <bpmn:task id="Activity_1xpaggf" name="Update Application Status - Processing" camunda:asyncAfter="true">
      <bpmn:extensionElements>
        <camunda:executionListener event="start">
          <camunda:script scriptFormat="javascript">execution.setVariable('applicationStatus', "Processing");</camunda:script>
        </camunda:executionListener>
        <camunda:executionListener class="org.camunda.bpm.extension.hooks.listeners.ApplicationStateListener" event="start" />
        <camunda:executionListener event="start">
          <camunda:script scriptFormat="javascript">execution.setVariable('retry', 0);</camunda:script>
        </camunda:executionListener>
        <camunda:inputOutput>
          <camunda:outputParameter name="retry">0</camunda:outputParameter>
        </camunda:inputOutput>
      </bpmn:extensionElements>
      <bpmn:incoming>Flow_11aa80b</bpmn:incoming>
      <bpmn:outgoing>Flow_08bdel0</bpmn:outgoing>
    </bpmn:task>
    <bpmn:sequenceFlow id="Flow_08bdel0" sourceRef="Activity_1xpaggf" targetRef="Gateway_0l66sc4" />
    <bpmn:exclusiveGateway id="Gateway_0l66sc4">
      <bpmn:incoming>Flow_08bdel0</bpmn:incoming>
      <bpmn:incoming>Flow_0fa4hmr</bpmn:incoming>
      <bpmn:outgoing>Flow_17fr8p5</bpmn:outgoing>
    </bpmn:exclusiveGateway>
    <bpmn:sequenceFlow id="Flow_17fr8p5" sourceRef="Gateway_0l66sc4" targetRef="Activity_153941x" />
    <bpmn:exclusiveGateway id="Gateway_0p51y5n" name="Submission Complete ?">
      <bpmn:incoming>Flow_03v93rj</bpmn:incoming>
      <bpmn:outgoing>Flow_04z5ai6</bpmn:outgoing>
      <bpmn:outgoing>Flow_08q6qgc</bpmn:outgoing>
    </bpmn:exclusiveGateway>
    <bpmn:sequenceFlow id="Flow_03v93rj" sourceRef="submit_collision" targetRef="Gateway_0p51y5n" />
    <bpmn:sequenceFlow id="Flow_04z5ai6" name="Yes" sourceRef="Gateway_0p51y5n" targetRef="Activity_0azpkne">
      <bpmn:conditionExpression xsi:type="bpmn:tFormalExpression">${statusCode == 201}</bpmn:conditionExpression>
    </bpmn:sequenceFlow>
    <bpmn:exclusiveGateway id="Gateway_17ut9lx" name="Has Retried ?">
      <bpmn:incoming>Flow_08q6qgc</bpmn:incoming>
      <bpmn:outgoing>Flow_08qg5ne</bpmn:outgoing>
      <bpmn:outgoing>Flow_17gk87h</bpmn:outgoing>
    </bpmn:exclusiveGateway>
    <bpmn:sequenceFlow id="Flow_08q6qgc" name="No" sourceRef="Gateway_0p51y5n" targetRef="Gateway_17ut9lx">
      <bpmn:conditionExpression xsi:type="bpmn:tFormalExpression">${statusCode != 201}</bpmn:conditionExpression>
    </bpmn:sequenceFlow>
    <bpmn:sequenceFlow id="Flow_08qg5ne" name="Yes" sourceRef="Gateway_17ut9lx" targetRef="Activity_0gxlnmc">
      <bpmn:conditionExpression xsi:type="bpmn:tFormalExpression">${execution.getVariable('retry') == 1}</bpmn:conditionExpression>
    </bpmn:sequenceFlow>
    <bpmn:sequenceFlow id="Flow_17gk87h" name="No" sourceRef="Gateway_17ut9lx" targetRef="Activity_179m48l">
      <bpmn:conditionExpression xsi:type="bpmn:tFormalExpression">${execution.getVariable('retry') != 1}</bpmn:conditionExpression>
    </bpmn:sequenceFlow>
    <bpmn:intermediateCatchEvent id="Event_0aqqwja" name="wait 60s">
      <bpmn:incoming>Flow_0mt8kcs</bpmn:incoming>
      <bpmn:outgoing>Flow_0fa4hmr</bpmn:outgoing>
      <bpmn:timerEventDefinition id="TimerEventDefinition_0d7vzde">
        <bpmn:timeDuration xsi:type="bpmn:tFormalExpression">PT60S</bpmn:timeDuration>
      </bpmn:timerEventDefinition>
    </bpmn:intermediateCatchEvent>
    <bpmn:sequenceFlow id="Flow_0fa4hmr" sourceRef="Event_0aqqwja" targetRef="Gateway_0l66sc4" />
    <bpmn:task id="Activity_179m48l" name="Update Application Status - Retry" camunda:asyncAfter="true">
      <bpmn:extensionElements>
        <camunda:executionListener event="start">
          <camunda:script scriptFormat="javascript">execution.setVariable('applicationStatus', "Retry");
execution.setVariable('retry', 1);</camunda:script>
        </camunda:executionListener>
        <camunda:executionListener class="org.camunda.bpm.extension.hooks.listeners.ApplicationStateListener" event="start" />
        <camunda:executionListener event="start">
          <camunda:script scriptFormat="javascript">execution.setVariable('retry', 1);
execution.setVariable("collision","");</camunda:script>
        </camunda:executionListener>
      </bpmn:extensionElements>
      <bpmn:incoming>Flow_17gk87h</bpmn:incoming>
      <bpmn:outgoing>Flow_0mt8kcs</bpmn:outgoing>
    </bpmn:task>
    <bpmn:sequenceFlow id="Flow_0mt8kcs" sourceRef="Activity_179m48l" targetRef="Event_0aqqwja" />
    <bpmn:scriptTask id="Activity_0gxlnmc" name="Generate Mail Content" scriptFormat="groovy">
      <bpmn:incoming>Flow_08qg5ne</bpmn:incoming>
      <bpmn:outgoing>Flow_1jlp88q</bpmn:outgoing>
      <bpmn:script>import groovy.json.JsonOutput
import java.lang.System

// Collect execution variables
def formId = "MV6020"
def applicationId = execution.getVariable("applicationId")
def submittedDate = execution.getVariable("submissionDate")
def errorDetails = "Error while submitting MV6020 application. Please check logs for details."


// Base URL from a process variable or hardcoded
def baseUrl = System.getenv('FORMSFLOW_WEB_URL')
// Application URL
def applicationUrl = "${baseUrl}/application/${applicationId}"

// Regex: strip everything after the host up to the first "/" in path
def matcher = baseUrl =~ "^(https?://[^/]+)/[^/]+/"
def hostUrl = matcher ? matcher[0][1] : baseUrl   // e.g. https://example.com
def camundaBaseUrl = "${hostUrl}/camunda"

def processInstanceId = execution.getProcessInstanceId()
def incidentUrl = "${camundaBaseUrl}/app/cockpit/default/#/process-instance/${processInstanceId}"

// Create payload map
def payload = [
    template            : "admin_notice_submission_failure.html",
    form_id             : formId,
    application_id      : applicationId,
    submitted_date      : submittedDate,
    error_details       : errorDetails,
    application_url     : applicationUrl,
    camunda_incident_url: incidentUrl
]

// Convert to JSON string
def payloadJson = JsonOutput.toJson(payload)

// Store payload as process variable
execution.setVariable("emailPayload", payloadJson)
</bpmn:script>
    </bpmn:scriptTask>
    <bpmn:sequenceFlow id="Flow_1jlp88q" sourceRef="Activity_0gxlnmc" targetRef="Activity_04q3sgs" />
    <bpmn:sequenceFlow id="Flow_1drchzm" sourceRef="Activity_02bgk3e" targetRef="Event_1egd12n" />
    <bpmn:serviceTask id="Activity_04q3sgs" name="Send Email - Notify Failure" camunda:asyncAfter="true">
      <bpmn:extensionElements>
        <camunda:connector>
          <camunda:inputOutput>
            <camunda:inputParameter name="method">POST</camunda:inputParameter>
            <camunda:inputParameter name="url">
              <camunda:script scriptFormat="groovy">var system = java.lang.System;
system.getenv('REACT_APP_RSBC_API_URL')+"/api/v1/email"</camunda:script>
            </camunda:inputParameter>
            <camunda:inputParameter name="payload">${emailPayload}</camunda:inputParameter>
            <camunda:inputParameter name="headers">
              <camunda:map>
                <camunda:entry key="Authorization">Bearer ${token}</camunda:entry>
                <camunda:entry key="Content-Type">application/json</camunda:entry>
              </camunda:map>
            </camunda:inputParameter>
            <camunda:outputParameter name="statusCode">#{statusCode}</camunda:outputParameter>
          </camunda:inputOutput>
          <camunda:connectorId>http-connector</camunda:connectorId>
        </camunda:connector>
        <camunda:failedJobRetryTimeCycle>R0/PT1M</camunda:failedJobRetryTimeCycle>
      </bpmn:extensionElements>
      <bpmn:incoming>Flow_1jlp88q</bpmn:incoming>
      <bpmn:outgoing>Flow_1cs9gzs</bpmn:outgoing>
    </bpmn:serviceTask>
    <bpmn:sequenceFlow id="Flow_1cs9gzs" sourceRef="Activity_04q3sgs" targetRef="Activity_02bgk3e" />
  </bpmn:process>
  <bpmn:error id="BUSINESS_ERROR" name="BUSINESS_ERROR" errorCode="BUSINESS_ERROR" />
  <bpmndi:BPMNDiagram id="BPMNDiagram_1">
    <bpmndi:BPMNPlane id="BPMNPlane_1" bpmnElement="digital_forms_events">
      <bpmndi:BPMNShape id="StartEvent_1_di" bpmnElement="StartEvent_1">
        <dc:Bounds x="152" y="272" width="36" height="36" />
        <bpmndi:BPMNLabel>
          <dc:Bounds x="160" y="315" width="22" height="14" />
        </bpmndi:BPMNLabel>
      </bpmndi:BPMNShape>
      <bpmndi:BPMNShape id="Event_0ts53jy_di" bpmnElement="Event_0ts53jy">
        <dc:Bounds x="1302" y="522" width="36" height="36" />
        <bpmndi:BPMNLabel>
          <dc:Bounds x="1310" y="498" width="19" height="14" />
        </bpmndi:BPMNLabel>
      </bpmndi:BPMNShape>
      <bpmndi:BPMNShape id="Activity_1j3xucw_di" bpmnElement="submit_collision">
        <dc:Bounds x="880" y="250" width="100" height="80" />
        <bpmndi:BPMNLabel />
      </bpmndi:BPMNShape>
      <bpmndi:BPMNShape id="Activity_0lm1zzi_di" bpmnElement="Activity_1pvahuo">
        <dc:Bounds x="720" y="250" width="100" height="80" />
        <bpmndi:BPMNLabel />
      </bpmndi:BPMNShape>
      <bpmndi:BPMNShape id="BPMNShape_06lqfa2" bpmnElement="Activity_153941x">
        <dc:Bounds x="530" y="250" width="100" height="80" />
        <bpmndi:BPMNLabel />
      </bpmndi:BPMNShape>
      <bpmndi:BPMNShape id="BPMNShape_0661aot" bpmnElement="Activity_02bgk3e">
        <dc:Bounds x="1580" y="80" width="100" height="80" />
        <bpmndi:BPMNLabel />
      </bpmndi:BPMNShape>
      <bpmndi:BPMNShape id="BPMNShape_0613upj" bpmnElement="Activity_0azpkne">
        <dc:Bounds x="1040" y="500" width="100" height="80" />
        <bpmndi:BPMNLabel />
      </bpmndi:BPMNShape>
      <bpmndi:BPMNShape id="Event_1egd12n_di" bpmnElement="Event_1egd12n">
        <dc:Bounds x="1802" y="102" width="36" height="36" />
        <bpmndi:BPMNLabel>
          <dc:Bounds x="1811" y="145" width="19" height="14" />
        </bpmndi:BPMNLabel>
      </bpmndi:BPMNShape>
      <bpmndi:BPMNShape id="BPMNShape_0zio69l" bpmnElement="Activity_1xpaggf">
        <dc:Bounds x="280" y="250" width="100" height="80" />
        <bpmndi:BPMNLabel />
      </bpmndi:BPMNShape>
      <bpmndi:BPMNShape id="Gateway_0l66sc4_di" bpmnElement="Gateway_0l66sc4" isMarkerVisible="true">
        <dc:Bounds x="435" y="265" width="50" height="50" />
      </bpmndi:BPMNShape>
      <bpmndi:BPMNShape id="Gateway_0p51y5n_di" bpmnElement="Gateway_0p51y5n" isMarkerVisible="true">
        <dc:Bounds x="1065" y="265" width="50" height="50" />
        <bpmndi:BPMNLabel>
          <dc:Bounds x="1142" y="280" width="57" height="27" />
        </bpmndi:BPMNLabel>
      </bpmndi:BPMNShape>
      <bpmndi:BPMNShape id="Gateway_17ut9lx_di" bpmnElement="Gateway_17ut9lx" isMarkerVisible="true">
        <dc:Bounds x="1065" y="95" width="50" height="50" />
        <bpmndi:BPMNLabel>
          <dc:Bounds x="1056" y="65" width="68" height="14" />
        </bpmndi:BPMNLabel>
      </bpmndi:BPMNShape>
      <bpmndi:BPMNShape id="Event_05r0jtv_di" bpmnElement="Event_0aqqwja">
        <dc:Bounds x="442" y="102" width="36" height="36" />
        <bpmndi:BPMNLabel>
          <dc:Bounds x="440" y="72" width="41" height="14" />
        </bpmndi:BPMNLabel>
      </bpmndi:BPMNShape>
      <bpmndi:BPMNShape id="BPMNShape_1e2z65i" bpmnElement="Activity_179m48l">
        <dc:Bounds x="670" y="80" width="100" height="80" />
        <bpmndi:BPMNLabel />
      </bpmndi:BPMNShape>
      <bpmndi:BPMNShape id="Activity_0e6xit1_di" bpmnElement="Activity_0gxlnmc">
        <dc:Bounds x="1230" y="80" width="100" height="80" />
        <bpmndi:BPMNLabel />
      </bpmndi:BPMNShape>
      <bpmndi:BPMNShape id="BPMNShape_1ywbbj4" bpmnElement="Activity_04q3sgs">
        <dc:Bounds x="1410" y="80" width="100" height="80" />
        <bpmndi:BPMNLabel />
      </bpmndi:BPMNShape>
      <bpmndi:BPMNEdge id="Flow_11aa80b_di" bpmnElement="Flow_11aa80b">
        <di:waypoint x="188" y="290" />
        <di:waypoint x="280" y="290" />
        <bpmndi:BPMNLabel>
          <dc:Bounds x="197" y="273" width="66" height="14" />
        </bpmndi:BPMNLabel>
      </bpmndi:BPMNEdge>
      <bpmndi:BPMNEdge id="Flow_0es6pgh_di" bpmnElement="Flow_0es6pgh">
        <di:waypoint x="630" y="290" />
        <di:waypoint x="720" y="290" />
      </bpmndi:BPMNEdge>
      <bpmndi:BPMNEdge id="Flow_0np0ks7_di" bpmnElement="Flow_0np0ks7">
        <di:waypoint x="1140" y="540" />
        <di:waypoint x="1302" y="540" />
      </bpmndi:BPMNEdge>
      <bpmndi:BPMNEdge id="Flow_0dibfen_di" bpmnElement="Flow_0dibfen">
        <di:waypoint x="820" y="290" />
        <di:waypoint x="880" y="290" />
      </bpmndi:BPMNEdge>
      <bpmndi:BPMNEdge id="Flow_08bdel0_di" bpmnElement="Flow_08bdel0">
        <di:waypoint x="380" y="290" />
        <di:waypoint x="435" y="290" />
      </bpmndi:BPMNEdge>
      <bpmndi:BPMNEdge id="Flow_17fr8p5_di" bpmnElement="Flow_17fr8p5">
        <di:waypoint x="485" y="290" />
        <di:waypoint x="530" y="290" />
      </bpmndi:BPMNEdge>
      <bpmndi:BPMNEdge id="Flow_03v93rj_di" bpmnElement="Flow_03v93rj">
        <di:waypoint x="980" y="290" />
        <di:waypoint x="1065" y="290" />
      </bpmndi:BPMNEdge>
      <bpmndi:BPMNEdge id="Flow_04z5ai6_di" bpmnElement="Flow_04z5ai6">
        <di:waypoint x="1090" y="315" />
        <di:waypoint x="1090" y="500" />
        <bpmndi:BPMNLabel>
          <dc:Bounds x="1096" y="405" width="18" height="14" />
        </bpmndi:BPMNLabel>
      </bpmndi:BPMNEdge>
      <bpmndi:BPMNEdge id="Flow_08q6qgc_di" bpmnElement="Flow_08q6qgc">
        <di:waypoint x="1090" y="265" />
        <di:waypoint x="1090" y="145" />
        <bpmndi:BPMNLabel>
          <dc:Bounds x="1098" y="202" width="15" height="14" />
        </bpmndi:BPMNLabel>
      </bpmndi:BPMNEdge>
      <bpmndi:BPMNEdge id="Flow_08qg5ne_di" bpmnElement="Flow_08qg5ne">
        <di:waypoint x="1115" y="120" />
        <di:waypoint x="1230" y="120" />
        <bpmndi:BPMNLabel>
          <dc:Bounds x="1162" y="102" width="18" height="14" />
        </bpmndi:BPMNLabel>
      </bpmndi:BPMNEdge>
      <bpmndi:BPMNEdge id="Flow_17gk87h_di" bpmnElement="Flow_17gk87h">
        <di:waypoint x="1065" y="120" />
        <di:waypoint x="770" y="120" />
        <bpmndi:BPMNLabel>
          <dc:Bounds x="954" y="102" width="15" height="14" />
        </bpmndi:BPMNLabel>
      </bpmndi:BPMNEdge>
      <bpmndi:BPMNEdge id="Flow_0fa4hmr_di" bpmnElement="Flow_0fa4hmr">
        <di:waypoint x="460" y="138" />
        <di:waypoint x="460" y="265" />
      </bpmndi:BPMNEdge>
      <bpmndi:BPMNEdge id="Flow_0mt8kcs_di" bpmnElement="Flow_0mt8kcs">
        <di:waypoint x="670" y="120" />
        <di:waypoint x="478" y="120" />
      </bpmndi:BPMNEdge>
      <bpmndi:BPMNEdge id="Flow_1jlp88q_di" bpmnElement="Flow_1jlp88q">
        <di:waypoint x="1330" y="120" />
        <di:waypoint x="1410" y="120" />
      </bpmndi:BPMNEdge>
      <bpmndi:BPMNEdge id="Flow_1drchzm_di" bpmnElement="Flow_1drchzm">
        <di:waypoint x="1680" y="120" />
        <di:waypoint x="1802" y="120" />
      </bpmndi:BPMNEdge>
      <bpmndi:BPMNEdge id="Flow_1cs9gzs_di" bpmnElement="Flow_1cs9gzs">
        <di:waypoint x="1510" y="120" />
        <di:waypoint x="1580" y="120" />
      </bpmndi:BPMNEdge>
    </bpmndi:BPMNPlane>
  </bpmndi:BPMNDiagram>
</bpmn:definitions>
